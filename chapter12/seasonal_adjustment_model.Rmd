---
title: "seasonal_adjustment_model"
author: "Kousuke Kikuchi"
date: "September 29, 2015"
output: html_document
---

# 12. 季節調整モデル

### 12.1 季節成分モデル
ある一定の周期で現れるパターンSnを季節成分（seasonal components）という
p期ごとに周期があるときに、Sn = Sn-pとなるので、時間遅れオペレータBを使うと、以下のように近似的に満たす
$$
\bigl(1-B^p)s_{n} = 0
$$
1期分前の成分でモデルを考える
$$
\bigl(1-B^p)^l s_{n} = v_{n2} \\
v_{n2} \sim N \bigl(0, \tau^2_{n})
$$
ここからトレンドモデルを持っていき、状態空間モデルで解く方針らしい
$$
y_{n} = t_{n} + w_{n}  \\
y_{n} = t_{n} + s_{n} + w_{n}
$$
上の式を組み合わせて以下の式にする
$$
\bigl(1-B)^q e_{n} = 0
$$
ただし、1-Bを解くことはできないので∑B^k を解くらしい

### 12.2 標準的季節調整モデル
上から観測モデル、トレンド成分モデル、季節成分モデル。これらから状態空間モデルってカウマンフィルタで解く
$$
y_{n} = t_{n} + s_{n} + w_{n}\\
\Delta^kt_{n} = v_{n1} \\
\bigl(\sum_{i=0}^{p-1}B^i)^ls_{n} = v_{n2}
$$

### 12.3 定常AR成分を含む分解
長期予測能力が低く、短期予測能力を犠牲にしてもいい場合、用いる手法。新たな成分Pnを加えて
$$
y_{n} = t_{n} + s_{n} + w_{n} + p_{n}
$$
これで、状態空間モデルを作成し、カウマンフィルタで解く

### 12.4 曜日効果項
土曜日と日曜日が多ければ、販売高に影響を与えるが、それを考慮しましょう、というお話。
曜日効果係数betaは各曜日の係数を足すと0になるという条件を加える
$$
\sum_{k}^{7} \beta_{nk} = 0 
$$
あとはbetaをトレンド成分とみなして、状態空間モデルをつくり、カウマンフィルターで解く
